<!doctype html>
<meta charset=utf-8>
<title>&lt;whereby-embed&gt; element</title>
<link href="https://d2qulvgqu65efe.cloudfront.net/fonts/whereby-fonts.css" rel="stylesheet" type="text/css">
<link href="../styles.css" rel="stylesheet" type="text/css">
<script>
  if (!location.pathname.endsWith("/")) location.href = location.href + "/";
</script>
<style>
output {
  background-color: #444;
  border-radius: 4px;
  border: 1px solid #d4d4d4;
  color: #f7f7f7;
  display: block;
  font-family: monospace;
  height: 10em;
  max-width: 500px;
  overflow: auto;
  padding: 8px 16px;
}
</style>

<body class="wrapper">
<h1>The &lt;whereby-embed&gt; element</h1>
<p>This is currently experimental.

<p>You can try it out like this:

<code class=block>
  &lt;script type=module
  src="https://whereby.dev/embed/whereby-embed.js"&gt;&lt;/script&gt;<br>
  &lt;style&gt;whereby-embed { <em>height: 700px;</em> }&lt;/style&gt;<br>
  &lt;whereby-embed embed subdomain=<em>yourcompany</em> room="<em>/your_room</em>"&gt;&lt;/whereby-embed&gt;
</code>

<p>It will then look something like this:</p>

<script type=module src="./whereby-embed.js"></script>
<style>whereby-embed { height: 700px; }</style>
<whereby-embed embed subdomain=businessdemo displayName="Embed demo" room="https://sub-ip-10-100-0-78.rfc1918.disappear.at:4443/room"></whereby-embed>

<h2>Listening to events</h2>

<p>You can listen for events on the <code>&lt;whereby-embed&gt;</code> element. The following events
are supported:

<table>
  <tr><th>Event type <th>Description <th>Properties (from "detail")
  <tr>
    <td><code>ready</code>
    <td>Basic dependencies has loaded
    <td>&ndash;
  <tr>
    <td><code>participantupdate</code>
    <td>A new participant join/leave
    <td>{ count: Number }
  <tr>
    <td><code>leave</code>
    <td>The local user leaves
    <td>&ndash;
</table>

<p>You can use standard Javascript to listen to the events. Here's a small demo:
<pre class=code>
  const elm = document.querySelector("whereby-embed");
  const output = document.querySelector("output");
  const events = [];
  function logEvent(event) {
    output.innerText += `got event ${JSON.stringify({ type: event.type, detail: event.detail})}\n`;
  }
  elm.addEventListener("ready", logEvent)
  elm.addEventListener("participantupdate", logEvent)
  elm.addEventListener("leave", logEvent)
</pre>

<p>Output:<br> <output style="white-space: pre"></output>

<script type=module>
  const elm = document.querySelector("whereby-embed");
  const output = document.querySelector("output");
  const events = [];
  function logEvent(event) {
    output.innerText += `got event ${JSON.stringify({ type: event.type, detail: event.detail})}\n`;
  }
  elm.addEventListener("ready", logEvent)
  elm.addEventListener("participantupdate", logEvent)
  elm.addEventListener("leave", logEvent)
</script>

</body>
